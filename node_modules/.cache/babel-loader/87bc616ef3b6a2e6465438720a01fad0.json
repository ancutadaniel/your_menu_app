{"ast":null,"code":"import _regeneratorRuntime from \"E:\\\\Scoala IT\\\\Your Menu App\\\\Your Menu App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\Scoala IT\\\\Your Menu App\\\\Your Menu App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"E:\\\\Scoala IT\\\\Your Menu App\\\\Your Menu App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\Scoala IT\\\\Your Menu App\\\\Your Menu App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\Scoala IT\\\\Your Menu App\\\\Your Menu App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\Scoala IT\\\\Your Menu App\\\\Your Menu App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\Scoala IT\\\\Your Menu App\\\\Your Menu App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"E:\\\\Scoala IT\\\\Your Menu App\\\\Your Menu App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"E:\\\\Scoala IT\\\\Your Menu App\\\\Your Menu App\\\\src\\\\views\\\\pages\\\\ModalLogin.js\";\nimport React from 'react';\nimport Modal from 'react-bootstrap/Modal';\nimport { Button, Form } from 'react-bootstrap';\nimport FacebookLogin from 'react-facebook-login';\nimport GoogleLogin from 'react-google-login';\nimport axios from 'axios';\nimport UserContext from '../../shared/user.context';\nimport { Redirect } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\n\nvar ModalLogin =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ModalLogin, _React$Component);\n\n  function ModalLogin() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ModalLogin);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ModalLogin)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.responseFacebook = function (response) {\n      //console.log(response);\n      //console.log(this.context);\n      _this.context.handleUserChange(response);\n\n      _this.setState({\n        redirect: true\n      });\n\n      document.body.classList.add('login');\n    };\n\n    _this.responseGoogle = function (response) {\n      console.log(response);\n\n      _this.context.handleUserChange(response.profileObj);\n\n      _this.setState({\n        redirect: true\n      });\n\n      document.body.classList.add('login');\n    };\n\n    _this.apiUrl = \"http://localhost:3004/users\";\n    _this.state = {\n      id: 0,\n      user: {},\n      name: '',\n      email: '',\n      password: '',\n      checkUser: '',\n      redirect: false,\n      modalShow: false,\n      validated: false,\n      isValid: true\n    };\n    _this.inputChanged = _this.inputChanged.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.formSubmit = _this.formSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ModalLogin, [{\n    key: \"inputChanged\",\n    value: function () {\n      var _inputChanged = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var value, user;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                value = e.currentTarget.value;\n                user = this.state.user;\n                user[e.currentTarget.id] = value;\n                this.setState({\n                  user: user\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function inputChanged(_x) {\n        return _inputChanged.apply(this, arguments);\n      }\n\n      return inputChanged;\n    }()\n  }, {\n    key: \"formSubmit\",\n    value: function () {\n      var _formSubmit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(e) {\n        var form, url, resp;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                e.preventDefault();\n                form = e.currentTarget;\n                url = this.apiUrl + \"/?name=\" + this.state.user.name + '&password=' + this.state.user.password;\n\n                if (!(form.checkValidity() === false)) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 5:\n                this.setState({\n                  validated: true\n                }); //console.log(this.state.user);\n\n                _context2.next = 8;\n                return axios.get(url);\n\n              case 8:\n                resp = _context2.sent;\n\n                if (resp.data[0]) {\n                  this.setState({\n                    redirect: true\n                  });\n                  this.context.handleUserChange(resp.data[0]);\n                  document.body.classList.add('login');\n                } else {\n                  this.setState({\n                    validated: false,\n                    isValid: false\n                  });\n                }\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function formSubmit(_x2) {\n        return _formSubmit.apply(this, arguments);\n      }\n\n      return formSubmit;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.state.redirect === true) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        });\n      }\n\n      var validated = this.state.validated;\n      return React.createElement(UserContext.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, function (_ref) {\n        var user = _ref.user,\n            handleUserChange = _ref.handleUserChange;\n        return React.createElement(Modal, Object.assign({}, _this2.props, {\n          size: \"lg\",\n          \"aria-labelledby\": \"contained-modal-title-vcenter\",\n          centered: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }), React.createElement(Modal.Header, {\n          closeButton: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(Modal.Title, {\n          id: \"contained-modal-title-vcenter\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, \"Log in to your account\")), React.createElement(Modal.Body, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, React.createElement(Form, {\n          noValidate: true,\n          validated: validated,\n          onSubmit: function onSubmit(e) {\n            return _this2.formSubmit(e);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(Form.Group, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, React.createElement(Form.Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, \"Name\"), React.createElement(Form.Control, {\n          required: true,\n          id: \"name\",\n          type: \"text\",\n          value: _this2.state.user.name,\n          onChange: _this2.inputChanged,\n          placeholder: \"Name\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }), React.createElement(Form.Control.Feedback, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, \"Looks good!\"), React.createElement(Form.Control.Feedback, {\n          type: \"invalid\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, \"Please enter a name.\")), React.createElement(Form.Group, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, React.createElement(Form.Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, \"Password\"), React.createElement(Form.Control, {\n          required: true,\n          id: \"password\",\n          type: \"password\",\n          value: _this2.state.user.password,\n          onChange: _this2.inputChanged,\n          placeholder: \"Password\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }), React.createElement(Form.Control.Feedback, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, \"Super Password!\"), React.createElement(Form.Control.Feedback, {\n          type: \"invalid\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, \"Please set a strong password.\")), React.createElement(Form.Group, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, React.createElement(Form.Check, {\n          id: \"formBasicChecbox\",\n          type: \"checkbox\",\n          label: \"Keep me logged in to my account\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        })), React.createElement(Button, {\n          type: \"submit\",\n          variant: \"outline-secondary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, \"Login\")), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, !_this2.state.isValid ? \"Username or password is wrong\" : ''), React.createElement(\"p\", {\n          className: \"facebook\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, React.createElement(FacebookLogin, {\n          appId: \"1992350001069404\",\n          fields: \"name,email,picture\",\n          callback: _this2.responseFacebook,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        })), React.createElement(\"p\", {\n          className: \"google\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, \" \", React.createElement(GoogleLogin, {\n          clientId: \"903697692149-j4q2rsmltp40gik0lb4ciqk3m9d59e4k.apps.googleusercontent.com\",\n          onSuccess: _this2.responseGoogle,\n          onFailure: _this2.responseGoogle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        })), React.createElement(\"p\", {\n          className: \"new\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, \"New to YourMenu.menu?\"), React.createElement(Link, {\n          to: \"login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, \"Edit\")), React.createElement(Modal.Footer, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, React.createElement(Button, {\n          onClick: _this2.props.onHide,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, \"Close\")));\n      });\n    }\n  }]);\n\n  return ModalLogin;\n}(React.Component);\n\nModalLogin.contextType = UserContext;\nexport default ModalLogin;","map":{"version":3,"sources":["E:\\Scoala IT\\Your Menu App\\Your Menu App\\src\\views\\pages\\ModalLogin.js"],"names":["React","Modal","Button","Form","FacebookLogin","GoogleLogin","axios","UserContext","Redirect","Link","ModalLogin","args","responseFacebook","response","context","handleUserChange","setState","redirect","document","body","classList","add","responseGoogle","console","log","profileObj","apiUrl","state","id","user","name","email","password","checkUser","modalShow","validated","isValid","inputChanged","bind","formSubmit","e","value","currentTarget","preventDefault","form","url","checkValidity","get","resp","data","props","onHide","Component","contextType"],"mappings":"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","sourcesContent":["import React  from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport  { Button , Form } from 'react-bootstrap';\r\nimport FacebookLogin from 'react-facebook-login';\r\nimport GoogleLogin from 'react-google-login';\r\nimport axios from 'axios';\r\nimport UserContext from '../../shared/user.context';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass ModalLogin extends React.Component {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this.apiUrl = \"http://localhost:3004/users\";\r\n        this.state = {\r\n          id: 0,\r\n          user: {},\r\n          name: '',\r\n          email: '',\r\n          password: '',\r\n          checkUser: '',\r\n          redirect: false,\r\n          modalShow: false,\r\n          validated: false,\r\n          isValid: true\r\n        };\r\n\r\n        this.inputChanged = this.inputChanged.bind(this);\r\n        this.formSubmit = this.formSubmit.bind(this);\r\n    }\r\n\r\n\r\n     async inputChanged(e) {\r\n      const value = e.currentTarget.value;\r\n      const user = this.state.user;\r\n      user[e.currentTarget.id] = value;\r\n      this.setState({user});\r\n    }\r\n\r\n\r\n    async formSubmit(e) {\r\n        e.preventDefault();\r\n        const form = e.currentTarget;\r\n        const url = this.apiUrl + \"/?name=\" + this.state.user.name + '&password=' + this.state.user.password;\r\n        if (form.checkValidity() === false) {\r\n           return;\r\n        }\r\n\r\n        this.setState({ validated: true });\r\n\r\n        //console.log(this.state.user);\r\n       const resp =  await axios.get(url);\r\n       if(resp.data[0]) {\r\n           this.setState ({redirect: true});\r\n           this.context.handleUserChange(resp.data[0]);\r\n           document.body.classList.add('login');\r\n       } else {\r\n           this.setState({validated: false, isValid: false})\r\n       }\r\n    }\r\n    responseFacebook = (response) => {\r\n        //console.log(response);\r\n        //console.log(this.context);\r\n        this.context.handleUserChange(response);\r\n        this.setState({\r\n          redirect: true,\r\n        });\r\n        document.body.classList.add('login');\r\n      }\r\n    \r\n      responseGoogle = (response) => {\r\n        console.log(response);\r\n    \r\n        this.context.handleUserChange(response.profileObj);\r\n        this.setState({\r\n          redirect: true\r\n        });\r\n        document.body.classList.add('login');\r\n      }\r\n     \r\n              \r\n    render() {\r\n        if (this.state.redirect === true) {\r\n            return (\r\n            <Redirect to='/' />\r\n            );\r\n        }        \r\n        \r\n        const { validated } = this.state;\r\n        return (\r\n            <UserContext.Consumer>\r\n            { ({ user, handleUserChange }) => (\r\n            <Modal {...this.props} size=\"lg\" aria-labelledby=\"contained-modal-title-vcenter\" centered >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                        Log in to your account\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form noValidate validated= {validated} onSubmit={e => this.formSubmit(e)} >\r\n                        <Form.Group>\r\n                            <Form.Label>Name</Form.Label>\r\n                            <Form.Control required id=\"name\" type=\"text\" value={this.state.user.name} onChange={this.inputChanged} placeholder=\"Name\" />\r\n                            <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\r\n                            <Form.Control.Feedback type=\"invalid\">Please enter a name.</Form.Control.Feedback>\r\n                        </Form.Group>\r\n                        {/* <Form.Group>\r\n                            <Form.Label>Email address</Form.Label>\r\n                            <Form.Control required id=\"email\" type=\"email\" value={this.state.user.email}  onChange={this.inputChanged} placeholder=\"Enter email\"  />\r\n                            <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\r\n                            <Form.Control.Feedback type=\"invalid\">Please provide a valid email.</Form.Control.Feedback>\r\n                            <Form.Text className=\"text-muted\">\r\n                                We'll never share your email with anyone else.\r\n                            </Form.Text>\r\n                        </Form.Group> */}\r\n                        <Form.Group>\r\n                            <Form.Label>Password</Form.Label>\r\n                            <Form.Control required id=\"password\" type=\"password\" value={this.state.user.password}  onChange={this.inputChanged} placeholder=\"Password\" />\r\n                            <Form.Control.Feedback>Super Password!</Form.Control.Feedback>\r\n                            <Form.Control.Feedback type=\"invalid\">Please set a strong password.</Form.Control.Feedback>\r\n                        </Form.Group>\r\n                        <Form.Group>\r\n                            <Form.Check id=\"formBasicChecbox\" type=\"checkbox\" label=\"Keep me logged in to my account\" />\r\n                        </Form.Group>\r\n                        <Button type=\"submit\" variant=\"outline-secondary\">Login</Button>\r\n                     </Form>\r\n                     <p>{!this.state.isValid ? (\"Username or password is wrong\") : ''}</p>\r\n                     <p className=\"facebook\"><FacebookLogin appId=\"1992350001069404\" fields=\"name,email,picture\" callback={this.responseFacebook}/></p>\r\n                     <p className=\"google\"> <GoogleLogin clientId=\"903697692149-j4q2rsmltp40gik0lb4ciqk3m9d59e4k.apps.googleusercontent.com\" onSuccess={this.responseGoogle} onFailure={this.responseGoogle}/></p>\r\n\r\n                    <p className=\"new\">New to YourMenu.menu?</p>\r\n                   \r\n                    <Link to= {\"login\"  }> \r\n                Edit\r\n            </Link>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button onClick={this.props.onHide}>Close</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n            ) }\r\n            </UserContext.Consumer>\r\n        );\r\n    }\r\n}\r\nModalLogin.contextType = UserContext;\r\n\r\nexport default ModalLogin;\r\n"]},"metadata":{},"sourceType":"module"}